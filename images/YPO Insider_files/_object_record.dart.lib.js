// Generated by DDC, the Dart Development Compiler (to JavaScript).
// Version: 3.3.1 (stable) (Wed Mar 6 13:09:19 2024 +0000) on "macos_arm64"
// Module: packages/leak_tracker/src/leak_tracking/_object_record.dart
// Flags: newRuntimeTypes(true), soundNullSafety(true), enableAsserts(true)
define(['dart_sdk', 'packages/leak_tracker/src/leak_tracking/primitives/_gc_counter.dart', 'packages/leak_tracker/src/shared/shared_model.dart'], (function load__packages__leak_tracker__src__leak_tracking___object_record_dart(dart_sdk, packages__leak_tracker__src__leak_tracking__primitives___gc_counter$46dart, packages__leak_tracker__src__shared__shared_model$46dart) {
  'use strict';
  const dart_rti = dart_sdk.dart_rti;
  const core = dart_sdk.core;
  const _js_helper = dart_sdk._js_helper;
  const dart = dart_sdk.dart;
  const dartx = dart_sdk.dartx;
  const _gc_counter = packages__leak_tracker__src__leak_tracking__primitives___gc_counter$46dart.src__leak_tracking__primitives___gc_counter;
  const shared_model = packages__leak_tracker__src__shared__shared_model$46dart.src__shared__shared_model;
  var _object_record = Object.create(dart.library);
  var $runtimeType = dartx.runtimeType;
  var $_set = dartx._set;
  var $addAll = dartx.addAll;
  dart._checkModuleNullSafetyMode(true);
  dart._checkModuleRuntimeTypes(true);
  var T = {
    Object: () => (T.Object = dart.constFn(dart_rti.findType("core|Object")))(),
    String: () => (T.String = dart.constFn(dart_rti.findType("core|String")))(),
    dynamic: () => (T.dynamic = dart.constFn(dart_rti.findType("@")))(),
    intAndDateTimeTovoid: () => (T.intAndDateTimeTovoid = dart.constFn(dart_rti.findType("~(core|int,core|DateTime)")))(),
    bool: () => (T.bool = dart.constFn(dart_rti.findType("core|bool")))(),
    DurationAndintTobool: () => (T.DurationAndintTobool = dart.constFn(dart_rti.findType("core|bool(core|Duration,core|int)")))(),
    intAndDateTimeAndDuration__Tobool: () => (T.intAndDateTimeAndDuration__Tobool = dart.constFn(dart_rti.findType("core|bool(core|int,core|DateTime,core|Duration,core|int)")))(),
    StringAndObjectTovoid: () => (T.StringAndObjectTovoid = dart.constFn(dart_rti.findType("~(core|String,core|Object)")))(),
    MapNOfString$dynamicTovoid: () => (T.MapNOfString$dynamicTovoid = dart.constFn(dart_rti.findType("~(core|Map<core|String,@>?)")))(),
    VoidToLeakReport: () => (T.VoidToLeakReport = dart.constFn(dart_rti.findType("leak_tracker__src__shared__shared_model|LeakReport()")))(),
    WeakReferenceOfObject: () => (T.WeakReferenceOfObject = dart.constFn(dart_rti.findType("core|WeakReference<core|Object>")))(),
    int: () => (T.int = dart.constFn(dart_rti.findType("core|int")))(),
    MapNOfString$dynamic: () => (T.MapNOfString$dynamic = dart.constFn(dart_rti.findType("core|Map<core|String,@>?")))(),
    PhaseSettings: () => (T.PhaseSettings = dart.constFn(dart_rti.findType("leak_tracker__src__leak_tracking__primitives__model|PhaseSettings")))(),
    Type: () => (T.Type = dart.constFn(dart_rti.findType("core|Type")))(),
    DateTimeN: () => (T.DateTimeN = dart.constFn(dart_rti.findType("core|DateTime?")))(),
    intN: () => (T.intN = dart.constFn(dart_rti.findType("core|int?")))()
  };
  var G = {
    WeakReferenceOfObject: () => (G.WeakReferenceOfObject = dart.constFn(core.WeakReference$(T.Object())))(),
    IdentityMapOfString$dynamic: () => (G.IdentityMapOfString$dynamic = dart.constFn(_js_helper.IdentityMap$(T.String(), T.dynamic())))()
  };
  const CT = Object.create({
    _: () => (C, CT)
  });
  var I = [
    "file:///Users/haggaibarel/.pub-cache/hosted/pub.dev/leak_tracker-10.0.0/lib/src/leak_tracking/_object_record.dart",
    "package:leak_tracker/src/leak_tracking/_object_record.dart",
    "dart:core",
    "package:leak_tracker/src/leak_tracking/primitives/model.dart"
  ];
  var ref = dart.privateName(_object_record, "ObjectRecord.ref");
  var code = dart.privateName(_object_record, "ObjectRecord.code");
  var context$ = dart.privateName(_object_record, "ObjectRecord.context");
  var phase$ = dart.privateName(_object_record, "ObjectRecord.phase");
  var type = dart.privateName(_object_record, "ObjectRecord.type");
  var trackedClass$ = dart.privateName(_object_record, "ObjectRecord.trackedClass");
  var _disposalTime = dart.privateName(_object_record, "_disposalTime");
  var _disposalGcCount = dart.privateName(_object_record, "_disposalGcCount");
  var _gcedTime = dart.privateName(_object_record, "_gcedTime");
  var _gcedGcCount = dart.privateName(_object_record, "_gcedGcCount");
  _object_record.ObjectRecord = class ObjectRecord extends core.Object {
    get ref() {
      return this[ref];
    }
    set ref(value) {
      super.ref = value;
    }
    get code() {
      return this[code];
    }
    set code(value) {
      super.code = value;
    }
    get context() {
      return this[context$];
    }
    set context(value) {
      this[context$] = value;
    }
    get phase() {
      return this[phase$];
    }
    set phase(value) {
      super.phase = value;
    }
    get type() {
      return this[type];
    }
    set type(value) {
      super.type = value;
    }
    get trackedClass() {
      return this[trackedClass$];
    }
    set trackedClass(value) {
      super.trackedClass = value;
    }
    static ['_#new#tearOff'](object, context, trackedClass, phase) {
      return new _object_record.ObjectRecord.new(object, context, trackedClass, phase);
    }
    setDisposed(gcTime, time) {
      if (this[_disposalGcCount] != null) return;
      if (this[_gcedGcCount] != null) {
        dart.throw(core.Exception.new("The object " + dart.strSafe(this.code) + " should not be disposed after being GCed"));
      }
      this[_disposalGcCount] = gcTime;
      this[_disposalTime] = time;
    }
    setGCed(gcCount, time) {
      if (this[_gcedGcCount] != null) dart.throw(core.Exception.new("The object " + dart.strSafe(this.code) + " GCed twice"));
      this[_gcedGcCount] = gcCount;
      this[_gcedTime] = time;
    }
    get isGCed() {
      return this[_gcedGcCount] != null;
    }
    get isDisposed() {
      return this[_disposalGcCount] != null;
    }
    isGCedLateLeak(disposalTime, numberOfGcCycles) {
      if (this[_disposalGcCount] == null || this[_gcedGcCount] == null) return false;
      if (!(this[_gcedTime] != null)) dart.assertFailed(null, I[0], 67, 12, "_gcedTime != null");
      return _gc_counter.shouldObjectBeGced({gcCountAtDisposal: dart.nullCheck(this[_disposalGcCount]), timeAtDisposal: dart.nullCheck(this[_disposalTime]), currentGcCount: dart.nullCheck(this[_gcedGcCount]), currentTime: dart.nullCheck(this[_gcedTime]), disposalTime: disposalTime, numberOfGcCycles: numberOfGcCycles});
    }
    isNotGCedLeak(currentGcCount, currentTime, disposalTime, numberOfGcCycles) {
      if (this[_gcedGcCount] != null) return false;
      return _gc_counter.shouldObjectBeGced({gcCountAtDisposal: dart.nullCheck(this[_disposalGcCount]), timeAtDisposal: dart.nullCheck(this[_disposalTime]), currentGcCount: currentGcCount, currentTime: currentTime, disposalTime: disposalTime, numberOfGcCycles: numberOfGcCycles});
    }
    get isNotDisposedLeak() {
      return this.isGCed && !this.isDisposed;
    }
    setContext(key, value) {
      let t$360;
      let theContext = (t$360 = this.context, t$360 == null ? new (G.IdentityMapOfString$dynamic()).new() : t$360);
      theContext[$_set](key, value);
      this.context = theContext;
    }
    mergeContext(addedContext) {
      if (addedContext == null) return;
      let theContext = this.context;
      if (theContext == null) {
        this.context = addedContext;
        return;
      }
      theContext[$addAll](addedContext);
    }
    toLeakReport() {
      return new shared_model.LeakReport.new({type: dart.toString(this.type), context: this.context, code: this.code, trackedClass: this.trackedClass, phase: this.phase.name});
    }
  };
  (_object_record.ObjectRecord.new = function(object, context, trackedClass, phase) {
    this[_disposalTime] = null;
    this[_disposalGcCount] = null;
    this[_gcedTime] = null;
    this[_gcedGcCount] = null;
    this[context$] = context;
    this[trackedClass$] = trackedClass;
    this[phase$] = phase;
    this[ref] = G.WeakReferenceOfObject().new(object);
    this[type] = dart.runtimeType(object);
    this[code] = core.identityHashCode(object);
    ;
  }).prototype = _object_record.ObjectRecord.prototype;
  dart.addTypeTests(_object_record.ObjectRecord);
  dart.addRtiResources(_object_record.ObjectRecord, ["leak_tracker__src__leak_tracking___object_record|ObjectRecord"]);
  dart.addTypeCaches(_object_record.ObjectRecord);
  dart.setMethodSignature(_object_record.ObjectRecord, () => dart.global.Object.setPrototypeOf({
    setDisposed: T.intAndDateTimeTovoid(),
    setGCed: T.intAndDateTimeTovoid(),
    isGCedLateLeak: T.DurationAndintTobool(),
    isNotGCedLeak: T.intAndDateTimeAndDuration__Tobool(),
    setContext: T.StringAndObjectTovoid(),
    mergeContext: T.MapNOfString$dynamicTovoid(),
    toLeakReport: T.VoidToLeakReport()
  }, dart.getMethods(dart.global.Object.getPrototypeOf(_object_record.ObjectRecord))));
  dart.setGetterSignature(_object_record.ObjectRecord, () => dart.global.Object.setPrototypeOf({
    isGCed: T.bool(),
    isDisposed: T.bool(),
    isNotDisposedLeak: T.bool()
  }, dart.getGetters(dart.global.Object.getPrototypeOf(_object_record.ObjectRecord))));
  dart.setLibraryUri(_object_record.ObjectRecord, I[1]);
  dart.setFieldSignature(_object_record.ObjectRecord, () => dart.global.Object.setPrototypeOf({
    ref: {type: T.WeakReferenceOfObject(), isConst: false, isFinal: true, libraryUri: I[2]},
    code: {type: T.int(), isConst: false, isFinal: true, libraryUri: I[2]},
    context: {type: T.MapNOfString$dynamic(), isConst: false, isFinal: false, libraryUri: I[2]},
    phase: {type: T.PhaseSettings(), isConst: false, isFinal: true, libraryUri: I[3]},
    type: {type: T.Type(), isConst: false, isFinal: true, libraryUri: I[2]},
    trackedClass: {type: T.String(), isConst: false, isFinal: true, libraryUri: I[2]},
    [_disposalTime]: {type: T.DateTimeN(), isConst: false, isFinal: false, libraryUri: I[2]},
    [_disposalGcCount]: {type: T.intN(), isConst: false, isFinal: false, libraryUri: I[2]},
    [_gcedTime]: {type: T.DateTimeN(), isConst: false, isFinal: false, libraryUri: I[2]},
    [_gcedGcCount]: {type: T.intN(), isConst: false, isFinal: false, libraryUri: I[2]}
  }, dart.getFields(dart.global.Object.getPrototypeOf(_object_record.ObjectRecord))));
  dart_rti._Universe.addRules(dart.typeUniverse, JSON.parse('{"core|String":{"Comparable.T":"core|String","core|Comparable":["core|String"],"core|Pattern":[]},"core|Comparable":{"Comparable.T":"1"},"core|int":{"core|num":[],"Comparable.T":"core|num","core|Comparable":["core|num"]},"core|num":{"Comparable.T":"core|num","core|Comparable":["core|num"]},"core|DateTime":{"Comparable.T":"core|DateTime","core|Comparable":["core|DateTime"]},"core|Duration":{"Comparable.T":"core|Duration","core|Comparable":["core|Duration"]},"core|Map":{"Map.K":"1","Map.V":"2"},"core|WeakReference":{"WeakReference.T":"1"}}'));
  dart.trackLibraries("packages/leak_tracker/src/leak_tracking/_object_record.dart", {
    "package:leak_tracker/src/leak_tracking/_object_record.dart": _object_record
  }, {
  }, '{"version":3,"sourceRoot":"","sources":["_object_record.dart"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAoB8B;;;;;;IAML;;;;;;IAED;;;;;;IAEF;;;;;;IAGT;;;;;;IAEE;;;;;;;;;gBAKQ,QAAiB;AAIpC,UAAI,gCAA0B;AAC9B,UAAI;AACF,mBAAM,mBACF,AAA0D,6BAA7C,aAAI;;AAEvB,+BAAmB,MAAM;AACzB,4BAAgB,IAAI;IACtB;YAIiB,SAAkB;AACjC,UAAI,4BAAsB,WAAM,mBAAU,AAA6B,6BAAhB,aAAI;AAC3D,2BAAe,OAAO;AACtB,wBAAY,IAAI;IAClB;;AAEmB,YAAA,AAAa;IAAO;;AAChB,YAAA,AAAiB;IAAO;mBAElB,cAAkB;AAC7C,UAAI,AAAiB,kCAAW,AAAa,4BAAS,MAAO;AAC7D,YAAO,AAAU;AACjB,YAAO,oDAC8B,eAAhB,yCACU,eAAb,sCACY,eAAZ,kCACM,eAAT,gCACC,YAAY,oBACR,gBAAgB;IAEtC;kBAGM,gBACK,aACA,cACL;AAEJ,UAAI,4BAAsB,MAAO;AACjC,YAAO,oDAC8B,eAAhB,yCACU,eAAb,sCACA,cAAc,eACjB,WAAW,gBACV,YAAY,oBACR,gBAAgB;IAEtC;;AAGE,YAAO,AAAO,iBAAI;IACpB;eAEuB,KAAY;;AAC3B,wBAAqB,sBAAR,gBAAW;AACpB,MAAV,UAAU,QAAC,GAAG,EAAI,KAAK;AACvB,qBAAU,UAAU;IACtB;iBAEwC;AACtC,UAAI,AAAa,YAAD,UAAU;AACpB,uBAAa;AACnB,UAAI,AAAW,UAAD;AACZ,uBAAU,YAAY;AACtB;;AAES,MAAX,UAAU,UAAQ,YAAY;IAChC;;AAE6B,oDACZ,cAAL,qBACG,oBACH,yBACQ,0BACP,AAAM;IACd;;8CA5GI,QACF,SACA,cACA;IAsBG;IACL;IAeK;IACL;IAzCE;IACA;IACA;IACG,YAAE,8BAAc,MAAM;IACrB,aAAS,iBAAP,MAAM;IACR,aAAE,sBAAiB,MAAM;;EAAC","file":"../../../../../../../../../packages/leak_tracker/src/leak_tracking/_object_record.dart.lib.js"}');
  // Exports:
  return {
    src__leak_tracking___object_record: _object_record
  };
}));

//# sourceMappingURL=_object_record.dart.lib.js.map
