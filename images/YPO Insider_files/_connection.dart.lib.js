// Generated by DDC, the Dart Development Compiler (to JavaScript).
// Version: 3.3.1 (stable) (Wed Mar 6 13:09:19 2024 +0000) on "macos_arm64"
// Module: packages/leak_tracker/src/leak_tracking/primitives/_retaining_path/_connection.dart
// Flags: newRuntimeTypes(true), soundNullSafety(true), enableAsserts(true)
define(['dart_sdk', 'packages/vm_service/vm_service_io.dart'], (function load__packages__leak_tracker__src__leak_tracking__primitives___retaining_path___connection_dart(dart_sdk, packages__vm_service__vm_service_io$46dart) {
  'use strict';
  const dart_rti = dart_sdk.dart_rti;
  const core = dart_sdk.core;
  const developer = dart_sdk.developer;
  const async = dart_sdk.async;
  const dart = dart_sdk.dart;
  const dartx = dart_sdk.dartx;
  const vm_service_io = packages__vm_service__vm_service_io$46dart.vm_service_io;
  var _connection = Object.create(dart.library);
  dart._checkModuleNullSafetyMode(true);
  dart._checkModuleRuntimeTypes(true);
  var T = {
    Uri: () => (T.Uri = dart.constFn(dart_rti.findType("core|Uri")))(),
    VmService: () => (T.VmService = dart.constFn(dart_rti.findType("vm_service__src__vm_service|VmService")))()
  };
  const CT = Object.create({
    _: () => (C, CT)
  });
  _connection._serviceUri = function _serviceUri() {
    return async.async(T.Uri(), function* _serviceUri() {
      let uri = (yield developer.Service.getInfo()).serverWebSocketUri;
      if (uri != null) return uri;
      uri = (yield developer.Service.controlWebServer({enable: true})).serverWebSocketUri;
      if (uri != null) return uri;
      dart.throw(new core.StateError.new("Could not start VM service. If you are running `flutter test`, pass the flag `--enable-vmservice`"));
    });
  };
  _connection.connect = function connect() {
    return async.async(T.VmService(), function* connect() {
      let uri = (yield _connection._serviceUri());
      let service = (yield vm_service_io.vmServiceConnectUri(dart.toString(uri)));
      yield service.getVersion();
      return service;
    });
  };
  dart.trackLibraries("packages/leak_tracker/src/leak_tracking/primitives/_retaining_path/_connection.dart", {
    "package:leak_tracker/src/leak_tracking/primitives/_retaining_path/_connection.dart": _connection
  }, {
  }, '{"version":3,"sourceRoot":"","sources":["_connection.dart"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAUuB;AACjB,gBAAgC,CAAzB,MAAc;AACzB,UAAI,GAAG,UAAU,MAAO,IAAG;AAE3B,YAAqD,CAA9C,MAAc,4CAAyB;AAC9C,UAAI,GAAG,UAAU,MAAO,IAAG;AAE3B,iBAAM;IAIR;;;AAKyB;AACjB,iBAAM,MAAM;AAEZ,qBAAU,MAAM,kCAAwB,cAAJ,GAAG;AAG7C,YAAM,AAAQ,OAAD;AAEb,YAAO,QAAO;IAChB","file":"../../../../../../../../../../../packages/leak_tracker/src/leak_tracking/primitives/_retaining_path/_connection.dart.lib.js"}');
  // Exports:
  return {
    src__leak_tracking__primitives___retaining_path___connection: _connection
  };
}));

//# sourceMappingURL=_connection.dart.lib.js.map
