// Generated by DDC, the Dart Development Compiler (to JavaScript).
// Version: 3.3.1 (stable) (Wed Mar 6 13:09:19 2024 +0000) on "macos_arm64"
// Module: packages/leak_tracker/src/leak_tracking/_object_record_set.dart
// Flags: newRuntimeTypes(true), soundNullSafety(true), enableAsserts(true)
define(['dart_sdk', 'packages/leak_tracker/src/shared/_primitives.dart', 'packages/collection/src/iterable_extensions.dart', 'packages/leak_tracker/src/leak_tracking/_object_record.dart'], (function load__packages__leak_tracker__src__leak_tracking___object_record_set_dart(dart_sdk, packages__leak_tracker__src__shared___primitives$46dart, packages__collection__src__iterable_extensions$46dart, packages__leak_tracker__src__leak_tracking___object_record$46dart) {
  'use strict';
  const dart_rti = dart_sdk.dart_rti;
  const core = dart_sdk.core;
  const _js_helper = dart_sdk._js_helper;
  const _interceptors = dart_sdk._interceptors;
  const dart = dart_sdk.dart;
  const dartx = dart_sdk.dartx;
  const _primitives = packages__leak_tracker__src__shared___primitives$46dart.src__shared___primitives;
  const iterable_extensions = packages__collection__src__iterable_extensions$46dart.src__iterable_extensions;
  const _object_record = packages__leak_tracker__src__leak_tracking___object_record$46dart.src__leak_tracking___object_record;
  var _object_record_set = Object.create(dart.library);
  var $_get = dartx._get;
  var $contains = dartx.contains;
  var $removeWhere = dartx.removeWhere;
  var $isEmpty = dartx.isEmpty;
  var $remove = dartx.remove;
  var $putIfAbsent = dartx.putIfAbsent;
  var $add = dartx.add;
  var $values = dartx.values;
  var $forEach = dartx.forEach;
  dart._checkModuleNullSafetyMode(true);
  dart._checkModuleRuntimeTypes(true);
  var T = {
    ObjectToint: () => (T.ObjectToint = dart.constFn(dart_rti.findType("core|int(core|Object)")))(),
    int: () => (T.int = dart.constFn(dart_rti.findType("core|int")))(),
    ListOfObjectRecord: () => (T.ListOfObjectRecord = dart.constFn(dart_rti.findType("core|List<leak_tracker__src__leak_tracking___object_record|ObjectRecord>")))(),
    ObjectRecord: () => (T.ObjectRecord = dart.constFn(dart_rti.findType("leak_tracker__src__leak_tracking___object_record|ObjectRecord")))(),
    ObjectRecordTobool: () => (T.ObjectRecordTobool = dart.constFn(dart_rti.findType("core|bool(leak_tracker__src__leak_tracking___object_record|ObjectRecord)")))(),
    VoidToListOfObjectRecord: () => (T.VoidToListOfObjectRecord = dart.constFn(dart_rti.findType("core|List<leak_tracker__src__leak_tracking___object_record|ObjectRecord>()")))(),
    ObjectToObjectRecordN: () => (T.ObjectToObjectRecordN = dart.constFn(dart_rti.findType("leak_tracker__src__leak_tracking___object_record|ObjectRecord?(core|Object)")))(),
    ObjectRecordTovoid: () => (T.ObjectRecordTovoid = dart.constFn(dart_rti.findType("~(leak_tracker__src__leak_tracking___object_record|ObjectRecord)")))(),
    ObjectAndMapNOfString$dynamicAndPhaseSettings__ToObjectRecord: () => (T.ObjectAndMapNOfString$dynamicAndPhaseSettings__ToObjectRecord = dart.constFn(dart_rti.findType("leak_tracker__src__leak_tracking___object_record|ObjectRecord(core|Object,core|Map<core|String,@>?,leak_tracker__src__leak_tracking__primitives__model|PhaseSettings,core|String)")))(),
    FnTovoid: () => (T.FnTovoid = dart.constFn(dart_rti.findType("~(~(leak_tracker__src__leak_tracking___object_record|ObjectRecord))")))(),
    MapOfint$ListOfObjectRecord: () => (T.MapOfint$ListOfObjectRecord = dart.constFn(dart_rti.findType("core|Map<core|int,core|List<leak_tracker__src__leak_tracking___object_record|ObjectRecord>>")))()
  };
  var G = {
    IdentityMapOfint$ListOfObjectRecord: () => (G.IdentityMapOfint$ListOfObjectRecord = dart.constFn(_js_helper.IdentityMap$(T.int(), T.ListOfObjectRecord())))(),
    JSArrayOfObjectRecord: () => (G.JSArrayOfObjectRecord = dart.constFn(_interceptors.JSArray$(T.ObjectRecord())))()
  };
  const CT = Object.create({
    _: () => (C, CT)
  });
  dart.defineLazy(CT, {
    get C0() {
      return C[0] = dart.fn(_primitives.standardIdentityHashCoder, T.ObjectToint());
    }
  }, false);
  var C = [void 0];
  var I = [
    "file:///Users/haggaibarel/.pub-cache/hosted/pub.dev/leak_tracker-10.0.0/lib/src/leak_tracking/_object_record_set.dart",
    "package:leak_tracker/src/leak_tracking/_object_record_set.dart",
    "dart:core"
  ];
  var coder$ = dart.privateName(_object_record_set, "ObjectRecordSet.coder");
  var _records = dart.privateName(_object_record_set, "_records");
  var _length = dart.privateName(_object_record_set, "_length");
  _object_record_set.ObjectRecordSet = class ObjectRecordSet extends core.Object {
    get coder() {
      return this[coder$];
    }
    set coder(value) {
      super.coder = value;
    }
    static ['_#new#tearOff'](opts) {
      let coder = opts && 'coder' in opts ? opts.coder : C[0] || CT.C0;
      return new _object_record_set.ObjectRecordSet.new({coder: coder});
    }
    contains(record) {
      let list = this[_records][$_get](record.code);
      if (list == null) return false;
      return list[$contains](record);
    }
    record(object) {
      let code = core.identityHashCode(object);
      let list = this[_records][$_get](code);
      if (list == null) return null;
      return iterable_extensions['IterableExtension|firstWhereOrNull'](T.ObjectRecord(), list, dart.fn(r => dart.equals(r.ref.target, object), T.ObjectRecordTobool()));
    }
    remove(record) {
      let list = this[_records][$_get](record.code);
      if (list == null) return;
      let removed = false;
      list[$removeWhere](dart.fn(r => {
        if (dart.equals(r, record)) {
          if (!!removed) dart.assertFailed(null, I[0], 42, 16, "!removed");
          removed = true;
        }
        return dart.equals(r, record);
      }, T.ObjectRecordTobool()));
      this[_length] = this[_length] - 1;
      if (list[$isEmpty]) this[_records][$remove](record.code);
    }
    putIfAbsent(object, context, phase, trackedClass) {
      let code = core.identityHashCode(object);
      let list = this[_records][$putIfAbsent](code, dart.fn(() => G.JSArrayOfObjectRecord().of([]), T.VoidToListOfObjectRecord()));
      let existing = iterable_extensions['IterableExtension|firstWhereOrNull'](T.ObjectRecord(), list, dart.fn(r => dart.equals(r.ref.target, object), T.ObjectRecordTobool()));
      if (existing != null) return existing;
      let result = new _object_record.ObjectRecord.new(object, context, trackedClass, phase);
      list[$add](result);
      this[_length] = this[_length] + 1;
      return result;
    }
    get length() {
      return this[_length];
    }
    forEach(callback) {
      for (let list of this[_records][$values]) {
        list[$forEach](callback);
      }
    }
  };
  (_object_record_set.ObjectRecordSet.new = function(opts) {
    let coder = opts && 'coder' in opts ? opts.coder : C[0] || CT.C0;
    this[_records] = new (G.IdentityMapOfint$ListOfObjectRecord()).new();
    this[_length] = 0;
    this[coder$] = coder;
    ;
  }).prototype = _object_record_set.ObjectRecordSet.prototype;
  dart.addTypeTests(_object_record_set.ObjectRecordSet);
  dart.addRtiResources(_object_record_set.ObjectRecordSet, ["leak_tracker__src__leak_tracking___object_record_set|ObjectRecordSet"]);
  dart.addTypeCaches(_object_record_set.ObjectRecordSet);
  dart.setMethodSignature(_object_record_set.ObjectRecordSet, () => dart.global.Object.setPrototypeOf({
    contains: T.ObjectRecordTobool(),
    record: T.ObjectToObjectRecordN(),
    remove: T.ObjectRecordTovoid(),
    putIfAbsent: T.ObjectAndMapNOfString$dynamicAndPhaseSettings__ToObjectRecord(),
    forEach: T.FnTovoid()
  }, dart.getMethods(dart.global.Object.getPrototypeOf(_object_record_set.ObjectRecordSet))));
  dart.setGetterSignature(_object_record_set.ObjectRecordSet, () => dart.global.Object.setPrototypeOf({length: T.int()}, dart.getGetters(dart.global.Object.getPrototypeOf(_object_record_set.ObjectRecordSet))));
  dart.setLibraryUri(_object_record_set.ObjectRecordSet, I[1]);
  dart.setFieldSignature(_object_record_set.ObjectRecordSet, () => dart.global.Object.setPrototypeOf({
    coder: {type: T.ObjectToint(), isConst: false, isFinal: true},
    [_records]: {type: T.MapOfint$ListOfObjectRecord(), isConst: false, isFinal: true, libraryUri: I[2]},
    [_length]: {type: T.int(), isConst: false, isFinal: false, libraryUri: I[2]}
  }, dart.getFields(dart.global.Object.getPrototypeOf(_object_record_set.ObjectRecordSet))));
  dart.moduleConstCaches.set("packages/leak_tracker/src/leak_tracking/_object_record_set.dart", C);
  dart_rti._Universe.addRules(dart.typeUniverse, JSON.parse('{"core|int":{"core|num":[],"Comparable.T":"core|num","core|Comparable":["core|num"]},"core|num":{"Comparable.T":"core|num","core|Comparable":["core|num"]},"core|Comparable":{"Comparable.T":"1"},"core|List":{"List.E":"1","Iterable.E":"1","core|Iterable":["1"],"_ListIterable.E":"1","core|_ListIterable":["1"],"EfficientLengthIterable.T":"1","_internal|EfficientLengthIterable":["1"],"HideEfficientLengthIterable.T":"1","_internal|HideEfficientLengthIterable":["1"]},"core|Iterable":{"Iterable.E":"1"},"core|_ListIterable":{"_ListIterable.E":"1","EfficientLengthIterable.T":"1","_internal|EfficientLengthIterable":["1"],"HideEfficientLengthIterable.T":"1","_internal|HideEfficientLengthIterable":["1"],"Iterable.E":"1","core|Iterable":["1"]},"_internal|EfficientLengthIterable":{"EfficientLengthIterable.T":"1","Iterable.E":"1","core|Iterable":["1"]},"_internal|HideEfficientLengthIterable":{"HideEfficientLengthIterable.T":"1","Iterable.E":"1","core|Iterable":["1"]},"core|Map":{"Map.K":"1","Map.V":"2"},"core|String":{"Comparable.T":"core|String","core|Comparable":["core|String"],"core|Pattern":[]}}'));
  dart.trackLibraries("packages/leak_tracker/src/leak_tracking/_object_record_set.dart", {
    "package:leak_tracker/src/leak_tracking/_object_record_set.dart": _object_record_set
  }, {
  }, '{"version":3,"sourceRoot":"","sources":["_object_record_set.dart"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAe0B;;;;;;;;;;aAIG;AACnB,iBAAO,AAAQ,sBAAC,AAAO,MAAD;AAC5B,UAAI,AAAK,IAAD,UAAU,MAAO;AACzB,YAAO,AAAK,KAAD,YAAU,MAAM;IAC7B;WAE4B;AACpB,iBAAO,sBAAiB,MAAM;AAE9B,iBAAO,AAAQ,sBAAC,IAAI;AAC1B,UAAI,AAAK,IAAD,UAAU,MAAO;AAEzB,YAAY,6EAAL,IAAI,EAAkB,QAAC,KAAmB,YAAb,AAAE,AAAI,CAAL,aAAe,MAAM;IAC5D;WAGyB;AACjB,iBAAO,AAAQ,sBAAC,AAAO,MAAD;AAC5B,UAAI,AAAK,IAAD,UAAU;AACd,oBAAU;AACT,MAAL,IAAI,eAAa,QAAC;AAChB,YAAM,YAAF,CAAC,EAAI,MAAM;AACb,gBAAQ,OAAO;AACf,oBAAU;;AAEZ,cAAS,aAAF,CAAC,EAAI,MAAM;;AAEpB,sBAAA,AAAO,gBAAA;AACP,UAAI,AAAK,IAAD,YAAU,AAAS,wBAAO,AAAO,MAAD;IAC1C;gBAGS,QACe,SACR,OACP;AAED,iBAAO,sBAAiB,MAAM;AAE9B,iBAAO,AAAS,6BAAY,IAAI,EAAE,cAAM;AAExC,qBAAgB,4EAAL,IAAI,EAAkB,QAAC,KAAmB,YAAb,AAAE,AAAI,CAAL,aAAe,MAAM;AACpE,UAAI,QAAQ,UAAU,MAAO,SAAQ;AAE/B,mBAAS,oCAAa,MAAM,EAAE,OAAO,EAAE,YAAY,EAAE,KAAK;AAC3D,MAAL,IAAI,OAAK,MAAM;AACf,sBAAA,AAAO,gBAAA;AACP,YAAO,OAAM;IACf;;AAGkB;IAAO;YAEuB;AAC9C,eAAS,OAAQ,AAAS;AACnB,QAAL,IAAI,WAAS,QAAQ;;IAEzB;;;QA/DsB;IAIhB,iBAAiD;IAoDnD,gBAAU;IAxDQ;;EAAmC","file":"../../../../../../../../../packages/leak_tracker/src/leak_tracking/_object_record_set.dart.lib.js"}');
  // Exports:
  return {
    src__leak_tracking___object_record_set: _object_record_set
  };
}));

//# sourceMappingURL=_object_record_set.dart.lib.js.map
