// Generated by DDC, the Dart Development Compiler (to JavaScript).
// Version: 3.3.1 (stable) (Wed Mar 6 13:09:19 2024 +0000) on "macos_arm64"
// Module: packages/async/src/async_memoizer.dart
// Flags: newRuntimeTypes(true), soundNullSafety(true), enableAsserts(true)
define(['dart_sdk'], (function load__packages__async__src__async_memoizer_dart(dart_sdk) {
  'use strict';
  const dart_rti = dart_sdk.dart_rti;
  const core = dart_sdk.core;
  const async = dart_sdk.async;
  const dart = dart_sdk.dart;
  const dartx = dart_sdk.dartx;
  var async_memoizer = Object.create(dart.library);
  dart._checkModuleNullSafetyMode(true);
  dart._checkModuleRuntimeTypes(true);
  var T$ = {
    bool: () => (T$.bool = dart.constFn(dart_rti.findType("core|bool")))()
  };
  const CT = Object.create({
    _: () => (C, CT)
  });
  var I = [
    "package:async/src/async_memoizer.dart",
    "dart:async"
  ];
  var _completer = dart.privateName(async_memoizer, "_completer");
  var _eval = dart.privateName(dart_rti, "_eval");
  var _as = dart.privateName(dart_rti, "_as");
  const _is_AsyncMemoizer_default = Symbol('_is_AsyncMemoizer_default');
  async_memoizer.AsyncMemoizer$ = dart.generic(T => {
    var __t$AsyncMemoizerOfT = () => (__t$AsyncMemoizerOfT = dart.constFn(T[_eval]("async__src__async_memoizer|AsyncMemoizer<0>")))();
    var __t$VoidToFutureOrOfT = () => (__t$VoidToFutureOrOfT = dart.constFn(T[_eval]("0/()")))();
    var __t$FutureOfT = () => (__t$FutureOfT = dart.constFn(T[_eval]("async|Future<0>")))();
    var __t$ObjectNToFutureOfT = () => (__t$ObjectNToFutureOfT = dart.constFn(T[_eval]("async|Future<0>(core|Object?)")))();
    var __t$CompleterOfT = () => (__t$CompleterOfT = dart.constFn(T[_eval]("async|Completer<0>")))();
    var __t$CompleterOfT$ = () => (__t$CompleterOfT$ = dart.constFn(async.Completer$(T)))();
    var __t$FutureOfT$ = () => (__t$FutureOfT$ = dart.constFn(async.Future$(T)))();
    class AsyncMemoizer extends core.Object {
      get future() {
        return this[_completer].future;
      }
      get hasRun() {
        return this[_completer].isCompleted;
      }
      runOnce(computation) {
        __t$VoidToFutureOrOfT()[_as](computation);
        if (!this.hasRun) this[_completer].complete(__t$FutureOfT$().sync(computation));
        return this.future;
      }
      static ['_#new#tearOff'](T) {
        return new (async_memoizer.AsyncMemoizer$(T)).new();
      }
    }
    (AsyncMemoizer.new = function() {
      this[_completer] = __t$CompleterOfT$().new();
      this.$ti = this.$ti || __t$AsyncMemoizerOfT();
      ;
    }).prototype = AsyncMemoizer.prototype;
    dart.addTypeTests(AsyncMemoizer);
    AsyncMemoizer.prototype[_is_AsyncMemoizer_default] = true;
    dart.addRtiResources(AsyncMemoizer, ["async__src__async_memoizer|AsyncMemoizer"]);
    dart.addTypeCaches(AsyncMemoizer);
    dart.setMethodSignature(AsyncMemoizer, () => dart.global.Object.setPrototypeOf({runOnce: __t$ObjectNToFutureOfT()}, dart.getMethods(dart.global.Object.getPrototypeOf(AsyncMemoizer))));
    dart.setGetterSignature(AsyncMemoizer, () => dart.global.Object.setPrototypeOf({
      future: __t$FutureOfT(),
      hasRun: T$.bool()
    }, dart.getGetters(dart.global.Object.getPrototypeOf(AsyncMemoizer))));
    dart.setLibraryUri(AsyncMemoizer, I[0]);
    dart.setFieldSignature(AsyncMemoizer, () => dart.global.Object.setPrototypeOf({[_completer]: {type: __t$CompleterOfT(), isConst: false, isFinal: true, libraryUri: I[1]}}, dart.getFields(dart.global.Object.getPrototypeOf(AsyncMemoizer))));
    return AsyncMemoizer;
  });
  async_memoizer.AsyncMemoizer = async_memoizer.AsyncMemoizer$();
  dart.addTypeTests(async_memoizer.AsyncMemoizer, _is_AsyncMemoizer_default);
  dart_rti._Universe.addRules(dart.typeUniverse, JSON.parse('{"async__src__async_memoizer|AsyncMemoizer":{"AsyncMemoizer.T":"1"},"async|Future":{"Future.T":"1"},"async|Completer":{"Completer.T":"1"}}'));
  dart.trackLibraries("packages/async/src/async_memoizer.dart", {
    "package:async/src/async_memoizer.dart": async_memoizer
  }, {
  }, '{"version":3,"sourceRoot":"","sources":["async_memoizer.dart"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgC0B,cAAA,AAAW;MAAM;;AAItB,cAAA,AAAW;MAAW;cAKA;;AACvC,aAAK,aAAQ,AAAW,0BAAgB,sBAAK,WAAW;AACxD,cAAO;MACT;;;;;;MAXM,mBAAa;;;IAYrB","file":"../../../../../../../../packages/async/src/async_memoizer.dart.lib.js"}');
  // Exports:
  return {
    src__async_memoizer: async_memoizer
  };
}));

//# sourceMappingURL=async_memoizer.dart.lib.js.map
