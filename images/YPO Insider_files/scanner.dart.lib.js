// Generated by DDC, the Dart Development Compiler (to JavaScript).
// Version: 3.3.1 (stable) (Wed Mar 6 13:09:19 2024 +0000) on "macos_arm64"
// Module: packages/boolean_selector/src/scanner.dart
// Flags: newRuntimeTypes(true), soundNullSafety(true), enableAsserts(true)
define(['dart_sdk', 'packages/string_scanner/src/relative_span_scanner.dart', 'packages/boolean_selector/src/token.dart'], (function load__packages__boolean_selector__src__scanner_dart(dart_sdk, packages__string_scanner__src__relative_span_scanner$46dart, packages__boolean_selector__src__token$46dart) {
  'use strict';
  const dart_rti = dart_sdk.dart_rti;
  const core = dart_sdk.core;
  const dart = dart_sdk.dart;
  const dartx = dart_sdk.dartx;
  const span_scanner = packages__string_scanner__src__relative_span_scanner$46dart.src__span_scanner;
  const token$ = packages__boolean_selector__src__token$46dart.src__token;
  var scanner = Object.create(dart.library);
  dart._checkModuleNullSafetyMode(true);
  dart._checkModuleRuntimeTypes(true);
  var T = {
    VoidToToken: () => (T.VoidToToken = dart.constFn(dart_rti.findType("boolean_selector__src__token|Token()")))(),
    TokenTypeTobool: () => (T.TokenTypeTobool = dart.constFn(dart_rti.findType("core|bool(boolean_selector__src__token|TokenType)")))(),
    TokenTypeToToken: () => (T.TokenTypeToToken = dart.constFn(dart_rti.findType("boolean_selector__src__token|Token(boolean_selector__src__token|TokenType)")))(),
    VoidTovoid: () => (T.VoidTovoid = dart.constFn(dart_rti.findType("~()")))(),
    VoidTobool: () => (T.VoidTobool = dart.constFn(dart_rti.findType("core|bool()")))(),
    SpanScanner: () => (T.SpanScanner = dart.constFn(dart_rti.findType("string_scanner__src__span_scanner|SpanScanner")))(),
    TokenN: () => (T.TokenN = dart.constFn(dart_rti.findType("boolean_selector__src__token|Token?")))(),
    bool: () => (T.bool = dart.constFn(dart_rti.findType("core|bool")))()
  };
  const CT = Object.create({
    _: () => (C, CT)
  });
  var I = [
    "package:boolean_selector/src/scanner.dart",
    "package:string_scanner/src/span_scanner.dart",
    "package:boolean_selector/src/token.dart",
    "dart:core"
  ];
  var _next = dart.privateName(scanner, "_next");
  var _endOfFileEmitted = dart.privateName(scanner, "_endOfFileEmitted");
  var _scanner = dart.privateName(scanner, "_scanner");
  var _readNext = dart.privateName(scanner, "_readNext");
  var _consumeWhitespace = dart.privateName(scanner, "_consumeWhitespace");
  var _scanOperator = dart.privateName(scanner, "_scanOperator");
  var _scanOr = dart.privateName(scanner, "_scanOr");
  var _scanAnd = dart.privateName(scanner, "_scanAnd");
  var _scanIdentifier = dart.privateName(scanner, "_scanIdentifier");
  var _multiLineComment = dart.privateName(scanner, "_multiLineComment");
  scanner.Scanner = class Scanner extends core.Object {
    static ['_#new#tearOff'](selector) {
      return new scanner.Scanner.new(selector);
    }
    peek() {
      let t$360;
      t$360 = this[_next];
      return t$360 == null ? this[_next] = this[_readNext]() : t$360;
    }
    next() {
      let t$360;
      let token = (t$360 = this[_next], t$360 == null ? this[_readNext]() : t$360);
      this[_endOfFileEmitted] = dart.equals(token.type, token$.TokenType.endOfFile);
      this[_next] = null;
      return token;
    }
    scan(type) {
      if (!dart.equals(this.peek().type, type)) return false;
      this.next();
      return true;
    }
    [_readNext]() {
      if (this[_endOfFileEmitted]) dart.throw(new core.StateError.new("No more tokens."));
      this[_consumeWhitespace]();
      if (this[_scanner].isDone) {
        return new token$.Token.new(token$.TokenType.endOfFile, this[_scanner].spanFrom(this[_scanner].state));
      }
      switch (this[_scanner].peekChar()) {
        case 40:
          {
            return this[_scanOperator](token$.TokenType.leftParen);
          }
        case 41:
          {
            return this[_scanOperator](token$.TokenType.rightParen);
          }
        case 63:
          {
            return this[_scanOperator](token$.TokenType.questionMark);
          }
        case 58:
          {
            return this[_scanOperator](token$.TokenType.colon);
          }
        case 33:
          {
            return this[_scanOperator](token$.TokenType.not);
          }
        case 124:
          {
            return this[_scanOr]();
          }
        case 38:
          {
            return this[_scanAnd]();
          }
        default:
          {
            return this[_scanIdentifier]();
          }
      }
    }
    [_scanOperator](type) {
      let start = this[_scanner].state;
      this[_scanner].readChar();
      return new token$.Token.new(type, this[_scanner].spanFrom(start));
    }
    [_scanOr]() {
      let start = this[_scanner].state;
      this[_scanner].expect("||");
      return new token$.Token.new(token$.TokenType.or, this[_scanner].spanFrom(start));
    }
    [_scanAnd]() {
      let start = this[_scanner].state;
      this[_scanner].expect("&&");
      return new token$.Token.new(token$.TokenType.and, this[_scanner].spanFrom(start));
    }
    [_scanIdentifier]() {
      this[_scanner].expect(scanner._hyphenatedIdentifier, {name: "expression"});
      return new token$.IdentifierToken.new(dart.nullCheck(dart.nullCheck(this[_scanner].lastMatch)._get(0)), dart.nullCheck(this[_scanner].lastSpan));
    }
    [_consumeWhitespace]() {
      while (this[_scanner].scan(scanner._whitespaceAndSingleLineComments) || this[_multiLineComment]()) {
      }
    }
    [_multiLineComment]() {
      if (!this[_scanner].scan("/*")) return false;
      while (this[_scanner].scan(scanner._multiLineCommentBody) || this[_multiLineComment]()) {
      }
      this[_scanner].expect("*/");
      return true;
    }
  };
  (scanner.Scanner.new = function(selector) {
    this[_next] = null;
    this[_endOfFileEmitted] = false;
    this[_scanner] = new span_scanner.SpanScanner.new(selector);
    ;
  }).prototype = scanner.Scanner.prototype;
  dart.addTypeTests(scanner.Scanner);
  dart.addRtiResources(scanner.Scanner, ["boolean_selector__src__scanner|Scanner"]);
  dart.addTypeCaches(scanner.Scanner);
  dart.setMethodSignature(scanner.Scanner, () => dart.global.Object.setPrototypeOf({
    peek: T.VoidToToken(),
    next: T.VoidToToken(),
    scan: T.TokenTypeTobool(),
    [_readNext]: T.VoidToToken(),
    [_scanOperator]: T.TokenTypeToToken(),
    [_scanOr]: T.VoidToToken(),
    [_scanAnd]: T.VoidToToken(),
    [_scanIdentifier]: T.VoidToToken(),
    [_consumeWhitespace]: T.VoidTovoid(),
    [_multiLineComment]: T.VoidTobool()
  }, dart.getMethods(dart.global.Object.getPrototypeOf(scanner.Scanner))));
  dart.setLibraryUri(scanner.Scanner, I[0]);
  dart.setFieldSignature(scanner.Scanner, () => dart.global.Object.setPrototypeOf({
    [_scanner]: {type: T.SpanScanner(), isConst: false, isFinal: true, libraryUri: I[1]},
    [_next]: {type: T.TokenN(), isConst: false, isFinal: false, libraryUri: I[2]},
    [_endOfFileEmitted]: {type: T.bool(), isConst: false, isFinal: false, libraryUri: I[3]}
  }, dart.getFields(dart.global.Object.getPrototypeOf(scanner.Scanner))));
  dart.defineLazy(scanner, {
    /*scanner._whitespaceAndSingleLineComments*/get _whitespaceAndSingleLineComments() {
      return core.RegExp.new("([ \\t\\n]+|//[^\\n]*(\\n|$))+");
    },
    /*scanner._multiLineCommentBody*/get _multiLineCommentBody() {
      return core.RegExp.new("([^/*]|/[^*]|\\*[^/])+");
    },
    /*scanner._hyphenatedIdentifier*/get _hyphenatedIdentifier() {
      return core.RegExp.new("[a-zA-Z_-][a-zA-Z0-9_-]*");
    }
  }, false);
  dart_rti._Universe.addRules(dart.typeUniverse, JSON.parse('{"string_scanner__src__span_scanner|SpanScanner":{"string_scanner__src__string_scanner|StringScanner":[],"string_scanner__src__line_scanner|LineScanner":[]},"string_scanner__src__line_scanner|LineScanner":{"string_scanner__src__string_scanner|StringScanner":[]}}'));
  dart.trackLibraries("packages/boolean_selector/src/scanner.dart", {
    "package:boolean_selector/src/scanner.dart": scanner
  }, {
  }, '{"version":3,"sourceRoot":"","sources":["scanner.dart"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CkB;YAAM,iBAAN,cAAU;IAAW;;;AAO/B,mBAAc,qBAAN,gBAAS;AACrB,gCAA+B,YAAX,AAAM,KAAD,OAAmB;AAC5C,oBAAQ;AACR,YAAO,MAAK;IACd;SAOoB;AAClB,uBAAI,AAAO,kBAAQ,IAAI,GAAE,MAAO;AAChC;AACA,YAAO;IACT;;AAIE,UAAI,yBAAmB,WAAM,wBAAW;AAExC;AACA,UAAI,AAAS;AACX,cAAO,sBAAgB,4BAAW,AAAS,wBAAS,AAAS;;AAG/D,cAAQ,AAAS;;;AAEb,kBAAO,qBAAwB;;;;AAE/B,kBAAO,qBAAwB;;;;AAE/B,kBAAO,qBAAwB;;;;AAE/B,kBAAO,qBAAwB;;;;AAE/B,kBAAO,qBAAwB;;;;AAE/B,kBAAO;;;;AAEP,kBAAO;;;;AAEP,kBAAO;;;IAEb;oBAM8B;AACxB,kBAAQ,AAAS;AACZ,MAAT;AACA,YAAO,sBAAM,IAAI,EAAE,AAAS,wBAAS,KAAK;IAC5C;;AAMM,kBAAQ,AAAS;AACZ,MAAT,sBAAgB;AAChB,YAAO,sBAAgB,qBAAI,AAAS,wBAAS,KAAK;IACpD;;AAMM,kBAAQ,AAAS;AACZ,MAAT,sBAAgB;AAChB,YAAO,sBAAgB,sBAAK,AAAS,wBAAS,KAAK;IACrD;;AAIW,MAAT,sBAAgB,sCAA6B;AAC7C,YAAO,gCAAsC,eAAJ,AAAC,eAAnB,AAAS,+BAAW,KAAsB,eAAjB,AAAS;IAC3D;;AAKE,aAAO,AAAS,oBAAK,6CACjB;;IAGN;;AAME,WAAK,AAAS,oBAAK,OAAO,MAAO;AAEjC,aAAO,AAAS,oBAAK,kCAA0B;;AAGtC,MAAT,sBAAgB;AAEhB,YAAO;IACT;;kCAlHe;IALR;IAGF,0BAAoB;IAEW,iBAAE,iCAAY,QAAQ;;EAAC;;;;;;;;;;;;;;;;;;;;;;;MAzBvD,wCAAgC;YAAG,iBAAO;;MAM1C,6BAAqB;YAAG,iBAAO;;MAM/B,6BAAqB;YAAG,iBAAO","file":"../../../../../../../../packages/boolean_selector/src/scanner.dart.lib.js"}');
  // Exports:
  return {
    src__scanner: scanner
  };
}));

//# sourceMappingURL=scanner.dart.lib.js.map
