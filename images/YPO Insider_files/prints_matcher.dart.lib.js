// Generated by DDC, the Dart Development Compiler (to JavaScript).
// Version: 3.3.1 (stable) (Wed Mar 6 13:09:19 2024 +0000) on "macos_arm64"
// Module: packages/matcher/src/expect/prints_matcher.dart
// Flags: newRuntimeTypes(true), soundNullSafety(true), enableAsserts(true)
define(['dart_sdk', 'packages/matcher/src/equals_matcher.dart', 'packages/matcher/src/expect/util/pretty_print.dart', 'packages/matcher/src/operator_matchers.dart', 'packages/test_api/hooks.dart', 'packages/matcher/src/interfaces.dart', 'packages/test_api/src/scaffolding/utils.dart', 'packages/test_api/src/backend/test_failure.dart'], (function load__packages__matcher__src__expect__prints_matcher_dart(dart_sdk, packages__matcher__src__equals_matcher$46dart, packages__matcher__src__expect__util__pretty_print$46dart, packages__matcher__src__operator_matchers$46dart, packages__test_api__hooks$46dart, packages__matcher__src__interfaces$46dart, packages__test_api__src__scaffolding__utils$46dart, packages__test_api__src__backend__test_failure$46dart) {
  'use strict';
  const dart_rti = dart_sdk.dart_rti;
  const core = dart_sdk.core;
  const async = dart_sdk.async;
  const _js_helper = dart_sdk._js_helper;
  const _interceptors = dart_sdk._interceptors;
  const dart = dart_sdk.dart;
  const dartx = dart_sdk.dartx;
  const description$ = packages__matcher__src__equals_matcher$46dart.src__description;
  const equals_matcher = packages__matcher__src__equals_matcher$46dart.src__equals_matcher;
  const type_matcher = packages__matcher__src__equals_matcher$46dart.src__type_matcher;
  const util = packages__matcher__src__equals_matcher$46dart.src__util;
  const pretty_print = packages__matcher__src__expect__util__pretty_print$46dart.src__expect__util__pretty_print;
  const operator_matchers = packages__matcher__src__operator_matchers$46dart.src__operator_matchers;
  const hooks = packages__test_api__hooks$46dart.hooks;
  const interfaces = packages__matcher__src__interfaces$46dart.src__interfaces;
  const utils = packages__test_api__src__scaffolding__utils$46dart.src__scaffolding__utils;
  const test_failure = packages__test_api__src__backend__test_failure$46dart.src__backend__test_failure;
  var prints_matcher = Object.create(dart.library);
  var throws_matcher = Object.create(dart.library);
  var future_matchers = Object.create(dart.library);
  var async_matcher = Object.create(dart.library);
  var expect = Object.create(dart.library);
  var $toString = dartx.toString;
  var $isEmpty = dartx.isEmpty;
  var $isNotEmpty = dartx.isNotEmpty;
  var $trimRight = dartx.trimRight;
  var $_set = dartx._set;
  var $_get = dartx._get;
  dart._checkModuleNullSafetyMode(true);
  dart._checkModuleRuntimeTypes(true);
  var T = {
    VoidTodynamic: () => (T.VoidTodynamic = dart.constFn(dart_rti.findType("@()")))(),
    dynamic: () => (T.dynamic = dart.constFn(dart_rti.findType("@")))(),
    ZoneAndZoneDelegateAndZone__Tovoid: () => (T.ZoneAndZoneDelegateAndZone__Tovoid = dart.constFn(dart_rti.findType("~(async|Zone,async|ZoneDelegate,async|Zone,core|String)")))(),
    Future: () => (T.Future = dart.constFn(dart_rti.findType("async|Future<@>")))(),
    StringN: () => (T.StringN = dart.constFn(dart_rti.findType("core|String?")))(),
    dynamicToStringN: () => (T.dynamicToStringN = dart.constFn(dart_rti.findType("core|String?(@)")))(),
    TypeMatcherOfFuture: () => (T.TypeMatcherOfFuture = dart.constFn(dart_rti.findType("matcher__src__type_matcher|TypeMatcher<async|Future<@>>")))(),
    String: () => (T.String = dart.constFn(dart_rti.findType("core|String")))(),
    TypeMatcherOfString: () => (T.TypeMatcherOfString = dart.constFn(dart_rti.findType("matcher__src__type_matcher|TypeMatcher<core|String>")))(),
    Matcher: () => (T.Matcher = dart.constFn(dart_rti.findType("matcher__src__interfaces|Matcher")))(),
    Null: () => (T.Null = dart.constFn(dart_rti.findType("core|Null")))(),
    dynamicToNull: () => (T.dynamicToNull = dart.constFn(dart_rti.findType("core|Null(@)")))(),
    dynamicAndMapTobool: () => (T.dynamicAndMapTobool = dart.constFn(dart_rti.findType("core|bool(@,core|Map<@,@>)")))(),
    ObjectNTodynamic: () => (T.ObjectNTodynamic = dart.constFn(dart_rti.findType("@(core|Object?)")))(),
    DescriptionToDescription: () => (T.DescriptionToDescription = dart.constFn(dart_rti.findType("matcher__src__interfaces|Description(matcher__src__interfaces|Description)")))(),
    StringToStringN: () => (T.StringToStringN = dart.constFn(dart_rti.findType("core|String?(core|String)")))(),
    Function: () => (T.Function = dart.constFn(dart_rti.findType("core|Function")))(),
    Object: () => (T.Object = dart.constFn(dart_rti.findType("core|Object")))(),
    FutureAndStringToFutureOfStringN: () => (T.FutureAndStringToFutureOfStringN = dart.constFn(dart_rti.findType("async|Future<core|String?>(async|Future<@>,core|String)")))(),
    dynamicAndStackTraceNToStringN: () => (T.dynamicAndStackTraceNToStringN = dart.constFn(dart_rti.findType("core|String?(@,core|StackTrace?)")))(),
    MatcherN: () => (T.MatcherN = dart.constFn(dart_rti.findType("matcher__src__interfaces|Matcher?")))(),
    AsyncMatcher: () => (T.AsyncMatcher = dart.constFn(dart_rti.findType("matcher__src__expect__async_matcher|AsyncMatcher")))(),
    dynamicToFutureOfStringN: () => (T.dynamicToFutureOfStringN = dart.constFn(dart_rti.findType("async|Future<core|String?>(@)")))(),
    Never: () => (T.Never = dart.constFn(dart_rti.findType("0&")))(),
    dynamicToNever: () => (T.dynamicToNever = dart.constFn(dart_rti.findType("0&(@)")))(),
    ObjectNAndMapTobool: () => (T.ObjectNAndMapTobool = dart.constFn(dart_rti.findType("core|bool(core|Object?,core|Map<@,@>)")))(),
    ObjectNAndDescriptionAndMap__ToDescription: () => (T.ObjectNAndDescriptionAndMap__ToDescription = dart.constFn(dart_rti.findType("matcher__src__interfaces|Description(core|Object?,matcher__src__interfaces|Description,core|Map<@,@>,core|bool)")))(),
    ObjectNAndMatcherAndStringN__ToString: () => (T.ObjectNAndMatcherAndStringN__ToString = dart.constFn(dart_rti.findType("core|String(core|Object?,matcher__src__interfaces|Matcher,core|String?,core|Map<@,@>,core|bool)")))(),
    VoidToNull: () => (T.VoidToNull = dart.constFn(dart_rti.findType("core|Null()")))()
  };
  var G = {
    TypeMatcherOfFuture: () => (G.TypeMatcherOfFuture = dart.constFn(type_matcher.TypeMatcher$(T.Future())))(),
    TypeMatcherOfString: () => (G.TypeMatcherOfString = dart.constFn(type_matcher.TypeMatcher$(T.String())))(),
    JSArrayOfMatcher: () => (G.JSArrayOfMatcher = dart.constFn(_interceptors.JSArray$(T.Matcher())))()
  };
  const CT = Object.create({
    _: () => (C, CT)
  });
  dart.defineLazy(CT, {
    get C0() {
      return C[0] = dart.const(Object.setPrototypeOf({
        $ti: T.TypeMatcherOfFuture(),
        [TypeMatcher__name]: null
      }, G.TypeMatcherOfFuture().prototype));
    },
    get C1() {
      return C[1] = dart.const(Object.setPrototypeOf({
        $ti: T.TypeMatcherOfString(),
        [TypeMatcher__name]: null
      }, G.TypeMatcherOfString().prototype));
    },
    get C2() {
      return C[2] = dart.const(Object.setPrototypeOf({
        [_matcher]: null
      }, throws_matcher.Throws.prototype));
    },
    get C3() {
      return C[3] = dart.const(Object.setPrototypeOf({
        [_matcher$1]: null
      }, future_matchers._Completes.prototype));
    },
    get C4() {
      return C[4] = dart.const(Object.setPrototypeOf({
      }, future_matchers._DoesNotComplete.prototype));
    }
  }, false);
  var C = Array(5).fill(void 0);
  var I = [
    "package:matcher/src/expect/async_matcher.dart",
    "package:matcher/src/expect/prints_matcher.dart",
    "package:matcher/src/interfaces.dart",
    "package:matcher/src/expect/throws_matcher.dart",
    "package:matcher/src/expect/future_matchers.dart"
  ];
  var _matcher$ = dart.privateName(prints_matcher, "_matcher");
  var _is = dart.privateName(dart_rti, "_is");
  var _check = dart.privateName(prints_matcher, "_check");
  var TypeMatcher__name = dart.privateName(type_matcher, "TypeMatcher._name");
  var _as = dart.privateName(dart_rti, "_as");
  async_matcher.AsyncMatcher = class AsyncMatcher extends interfaces.Matcher {
    matches(item, matchState) {
      let result = this.matchAsync(item);
      expect.expect(result, operator_matchers.anyOf(G.JSArrayOfMatcher().of([equals_matcher.equals(null), C[0] || CT.C0, C[1] || CT.C1])), {reason: "matchAsync() may only return a String, a Future, or null."});
      if (T.Future()[_is](result)) {
        let outstandingWork = hooks.TestHandle.current.markPending();
        result.then(T.Null(), dart.fn(realResult => {
          if (realResult != null) {
            expect.fail(expect.formatFailure(this, item, T.String()[_as](realResult)));
          }
          outstandingWork.complete();
        }, T.dynamicToNull()));
      } else if (typeof result == 'string') {
        matchState[$_set](this, result);
        return false;
      }
      return true;
    }
    describeMismatch(item, mismatchDescription, matchState, verbose) {
      return new description$.StringDescription.new(T.String()[_as](matchState[$_get](this)));
    }
  };
  (async_matcher.AsyncMatcher.new = function() {
    dart.global.Object.getPrototypeOf(async_matcher.AsyncMatcher).new.call(this);
    ;
  }).prototype = async_matcher.AsyncMatcher.prototype;
  dart.addTypeTests(async_matcher.AsyncMatcher);
  dart.addRtiResources(async_matcher.AsyncMatcher, ["matcher__src__expect__async_matcher|AsyncMatcher"]);
  dart.addTypeCaches(async_matcher.AsyncMatcher);
  dart.setMethodSignature(async_matcher.AsyncMatcher, () => dart.global.Object.setPrototypeOf({matches: T.dynamicAndMapTobool()}, dart.getMethods(dart.global.Object.getPrototypeOf(async_matcher.AsyncMatcher))));
  dart.setLibraryUri(async_matcher.AsyncMatcher, I[0]);
  prints_matcher._Prints = class _Prints extends async_matcher.AsyncMatcher {
    static ['_#new#tearOff'](_matcher) {
      return new prints_matcher._Prints.new(_matcher);
    }
    matchAsync(item) {
      if (!T.VoidTodynamic()[_is](item)) return "was not a unary Function";
      let buffer = new core.StringBuffer.new();
      let result = async.runZoned(T.dynamic(), item, {zoneSpecification: new async._ZoneSpecification.new({print: dart.fn((_, __, ____, line) => {
            buffer.writeln(line);
          }, T.ZoneAndZoneDelegateAndZone__Tovoid())})});
      return T.Future()[_is](result) ? result.then(T.StringN(), dart.fn(_ => this[_check](dart.toString(buffer)), T.dynamicToStringN())) : this[_check](dart.toString(buffer));
    }
    describe(description) {
      return description.add("prints ").addDescriptionOf(this[_matcher$]);
    }
    [_check](actual) {
      let matchState = new _js_helper.LinkedMap.new();
      if (this[_matcher$].matches(actual, matchState)) return null;
      let result = dart.toString(this[_matcher$].describeMismatch(actual, new description$.StringDescription.new(), matchState, false));
      let buffer = new core.StringBuffer.new();
      if (actual[$isEmpty]) {
        buffer.writeln("printed nothing");
      } else {
        buffer.writeln(pretty_print.indent(pretty_print.prettyPrint(actual), {first: "printed "}));
      }
      if (result[$isNotEmpty]) buffer.writeln(pretty_print.indent(result, {first: "  which "}));
      return dart.toString(buffer)[$trimRight]();
    }
  };
  (prints_matcher._Prints.new = function(_matcher) {
    this[_matcher$] = _matcher;
    dart.global.Object.getPrototypeOf(prints_matcher._Prints).new.call(this);
    ;
  }).prototype = prints_matcher._Prints.prototype;
  dart.addTypeTests(prints_matcher._Prints);
  dart.addRtiResources(prints_matcher._Prints, ["matcher__src__expect__prints_matcher|_Prints"]);
  dart.addTypeCaches(prints_matcher._Prints);
  dart.setMethodSignature(prints_matcher._Prints, () => dart.global.Object.setPrototypeOf({
    matchAsync: T.ObjectNTodynamic(),
    describe: T.DescriptionToDescription(),
    [_check]: T.StringToStringN()
  }, dart.getMethods(dart.global.Object.getPrototypeOf(prints_matcher._Prints))));
  dart.setLibraryUri(prints_matcher._Prints, I[1]);
  dart.setFieldSignature(prints_matcher._Prints, () => dart.global.Object.setPrototypeOf({[_matcher$]: {type: T.Matcher(), isConst: false, isFinal: true, libraryUri: I[2]}}, dart.getFields(dart.global.Object.getPrototypeOf(prints_matcher._Prints))));
  prints_matcher.prints = function prints(matcher) {
    return new prints_matcher._Prints.new(util.wrapMatcher(matcher));
  };
  var _matcher = dart.privateName(throws_matcher, "Throws._matcher");
  var _matcher$0 = dart.privateName(throws_matcher, "_matcher");
  var _matchFuture = dart.privateName(throws_matcher, "_matchFuture");
  var _check$ = dart.privateName(throws_matcher, "_check");
  throws_matcher.Throws = class Throws extends async_matcher.AsyncMatcher {
    get [_matcher$0]() {
      return this[_matcher];
    }
    set [_matcher$0](value) {
      super[_matcher$0] = value;
    }
    static ['_#new#tearOff'](matcher = null) {
      return new throws_matcher.Throws.new(matcher);
    }
    matchAsync(item) {
      if (!T.Function()[_is](item) && !T.Future()[_is](item)) {
        return "was not a Function or Future";
      }
      if (T.Future()[_is](item)) {
        return this[_matchFuture](item, "emitted ");
      }
      try {
        T.Function()[_as](item);
        let value = dart.dcall(item, []);
        if (T.Future()[_is](value)) {
          return this[_matchFuture](value, "returned a Future that emitted ");
        }
        return pretty_print.indent(pretty_print.prettyPrint(value), {first: "returned "});
      } catch (t$36$35e) {
        let error = dart.getThrown(t$36$35e);
        let trace = dart.stackTrace(t$36$35e);
        if (T.Object()[_is](error)) {
          return this[_check$](error, trace);
        } else
          throw t$36$35e;
      }
    }
    [_matchFuture](future, messagePrefix) {
      return async.async(T.StringN(), (function* _matchFuture() {
        try {
          let value = (yield future);
          return pretty_print.indent(pretty_print.prettyPrint(value), {first: messagePrefix});
        } catch (t$36$35e) {
          let error = dart.getThrown(t$36$35e);
          let trace = dart.stackTrace(t$36$35e);
          if (T.Object()[_is](error)) {
            return this[_check$](error, trace);
          } else
            throw t$36$35e;
        }
      }).bind(this));
    }
    describe(description) {
      if (this[_matcher$0] == null) {
        return description.add("throws");
      } else {
        return description.add("throws ").addDescriptionOf(this[_matcher$0]);
      }
    }
    [_check$](error, trace) {
      if (this[_matcher$0] == null) return null;
      let matchState = new _js_helper.LinkedMap.new();
      if (dart.nullCheck(this[_matcher$0]).matches(error, matchState)) return null;
      let result = dart.toString(dart.nullCheck(this[_matcher$0]).describeMismatch(error, new description$.StringDescription.new(), matchState, false));
      let buffer = new core.StringBuffer.new();
      buffer.writeln(pretty_print.indent(pretty_print.prettyPrint(error), {first: "threw "}));
      if (trace != null) {
        buffer.writeln(pretty_print.indent(dart.toString(hooks.TestHandle.current.formatStackTrace(trace)), {first: "stack "}));
      }
      if (result[$isNotEmpty]) buffer.writeln(pretty_print.indent(result, {first: "which "}));
      return dart.toString(buffer)[$trimRight]();
    }
  };
  (throws_matcher.Throws.new = function(matcher = null) {
    this[_matcher] = matcher;
    dart.global.Object.getPrototypeOf(throws_matcher.Throws).new.call(this);
    ;
  }).prototype = throws_matcher.Throws.prototype;
  dart.addTypeTests(throws_matcher.Throws);
  dart.addRtiResources(throws_matcher.Throws, ["matcher__src__expect__throws_matcher|Throws"]);
  dart.addTypeCaches(throws_matcher.Throws);
  dart.setMethodSignature(throws_matcher.Throws, () => dart.global.Object.setPrototypeOf({
    matchAsync: T.ObjectNTodynamic(),
    [_matchFuture]: T.FutureAndStringToFutureOfStringN(),
    describe: T.DescriptionToDescription(),
    [_check$]: T.dynamicAndStackTraceNToStringN()
  }, dart.getMethods(dart.global.Object.getPrototypeOf(throws_matcher.Throws))));
  dart.setLibraryUri(throws_matcher.Throws, I[3]);
  dart.setFieldSignature(throws_matcher.Throws, () => dart.global.Object.setPrototypeOf({[_matcher$0]: {type: T.MatcherN(), isConst: false, isFinal: true, libraryUri: I[2]}}, dart.getFields(dart.global.Object.getPrototypeOf(throws_matcher.Throws))));
  throws_matcher.throwsA = function throwsA(matcher) {
    return new throws_matcher.Throws.new(util.wrapMatcher(matcher));
  };
  dart.defineLazy(throws_matcher, {
    /*throws_matcher.throws*/get throws() {
      return C[2] || CT.C2;
    }
  }, false);
  var _matcher$1 = dart.privateName(future_matchers, "_Completes._matcher");
  var _matcher$2 = dart.privateName(future_matchers, "_matcher");
  future_matchers._Completes = class _Completes extends async_matcher.AsyncMatcher {
    get [_matcher$2]() {
      return this[_matcher$1];
    }
    set [_matcher$2](value) {
      super[_matcher$2] = value;
    }
    static ['_#new#tearOff'](_matcher) {
      return new future_matchers._Completes.new(_matcher);
    }
    matchAsync(item) {
      if (!T.Future()[_is](item)) return "was not a Future";
      return item.then(T.StringN(), dart.fn(value => async.async(T.StringN(), (function*() {
        if (this[_matcher$2] == null) return null;
        let result = null;
        if (T.AsyncMatcher()[_is](this[_matcher$2])) {
          result = T.StringN()[_as](yield async.awaitWithTypeCheck(T.Future(), T.AsyncMatcher()[_as](this[_matcher$2]).matchAsync(value)));
          if (result == null) return null;
        } else {
          let matchState = new _js_helper.LinkedMap.new();
          if (dart.nullCheck(this[_matcher$2]).matches(value, matchState)) return null;
          result = dart.toString(dart.nullCheck(this[_matcher$2]).describeMismatch(value, new description$.StringDescription.new(), matchState, false));
        }
        let buffer = new core.StringBuffer.new();
        buffer.writeln(pretty_print.indent(pretty_print.prettyPrint(value), {first: "emitted "}));
        if (result[$isNotEmpty]) buffer.writeln(pretty_print.indent(result, {first: "  which "}));
        return dart.toString(buffer)[$trimRight]();
      }).bind(this)), T.dynamicToFutureOfStringN()));
    }
    describe(description) {
      if (this[_matcher$2] == null) {
        description.add("completes successfully");
      } else {
        description.add("completes to a value that ").addDescriptionOf(this[_matcher$2]);
      }
      return description;
    }
  };
  (future_matchers._Completes.new = function(_matcher) {
    this[_matcher$1] = _matcher;
    dart.global.Object.getPrototypeOf(future_matchers._Completes).new.call(this);
    ;
  }).prototype = future_matchers._Completes.prototype;
  dart.addTypeTests(future_matchers._Completes);
  dart.addRtiResources(future_matchers._Completes, ["matcher__src__expect__future_matchers|_Completes"]);
  dart.addTypeCaches(future_matchers._Completes);
  dart.setMethodSignature(future_matchers._Completes, () => dart.global.Object.setPrototypeOf({
    matchAsync: T.ObjectNTodynamic(),
    describe: T.DescriptionToDescription()
  }, dart.getMethods(dart.global.Object.getPrototypeOf(future_matchers._Completes))));
  dart.setLibraryUri(future_matchers._Completes, I[4]);
  dart.setFieldSignature(future_matchers._Completes, () => dart.global.Object.setPrototypeOf({[_matcher$2]: {type: T.MatcherN(), isConst: false, isFinal: true, libraryUri: I[2]}}, dart.getFields(dart.global.Object.getPrototypeOf(future_matchers._Completes))));
  future_matchers._DoesNotComplete = class _DoesNotComplete extends interfaces.Matcher {
    static ['_#new#tearOff']() {
      return new future_matchers._DoesNotComplete.new();
    }
    describe(description) {
      description.add("does not complete");
      return description;
    }
    matches(item, matchState) {
      if (!T.Future()[_is](item)) return false;
      item.then(T.Never(), dart.fn(value => {
        expect.fail("Future was not expected to complete but completed with a value of " + dart.str(value));
      }, T.dynamicToNever()));
      expect.expect(utils.pumpEventQueue(), future_matchers.completes);
      return true;
    }
    describeMismatch(item, description, matchState, verbose) {
      if (!T.Future()[_is](item)) return description.add(dart.str(item) + " is not a Future");
      return description;
    }
  };
  (future_matchers._DoesNotComplete.new = function() {
    dart.global.Object.getPrototypeOf(future_matchers._DoesNotComplete).new.call(this);
    ;
  }).prototype = future_matchers._DoesNotComplete.prototype;
  dart.addTypeTests(future_matchers._DoesNotComplete);
  dart.addRtiResources(future_matchers._DoesNotComplete, ["matcher__src__expect__future_matchers|_DoesNotComplete"]);
  dart.addTypeCaches(future_matchers._DoesNotComplete);
  dart.setMethodSignature(future_matchers._DoesNotComplete, () => dart.global.Object.setPrototypeOf({
    describe: T.DescriptionToDescription(),
    matches: T.ObjectNAndMapTobool(),
    describeMismatch: T.ObjectNAndDescriptionAndMap__ToDescription()
  }, dart.getMethods(dart.global.Object.getPrototypeOf(future_matchers._DoesNotComplete))));
  dart.setLibraryUri(future_matchers._DoesNotComplete, I[4]);
  future_matchers.completion = function completion(matcher, description = null) {
    return new future_matchers._Completes.new(util.wrapMatcher(matcher));
  };
  dart.defineLazy(future_matchers, {
    /*future_matchers.completes*/get completes() {
      return C[3] || CT.C3;
    },
    /*future_matchers.doesNotComplete*/get doesNotComplete() {
      return C[4] || CT.C4;
    }
  }, false);
  expect.expect = function expect$(actual, matcher, opts) {
    let reason = opts && 'reason' in opts ? opts.reason : null;
    let skip = opts && 'skip' in opts ? opts.skip : null;
    let verbose = opts && 'verbose' in opts ? opts.verbose : false;
    let formatter = opts && 'formatter' in opts ? opts.formatter : null;
    expect._expect(actual, matcher, {reason: reason, skip: skip, verbose: verbose, formatter: formatter});
  };
  expect.expectLater = function expectLater(actual, matcher, opts) {
    let reason = opts && 'reason' in opts ? opts.reason : null;
    let skip = opts && 'skip' in opts ? opts.skip : null;
    return expect._expect(actual, matcher, {reason: reason, skip: skip});
  };
  expect._expect = function _expect(actual, matcher, opts) {
    let reason = opts && 'reason' in opts ? opts.reason : null;
    let skip = opts && 'skip' in opts ? opts.skip : null;
    let verbose = opts && 'verbose' in opts ? opts.verbose : false;
    let formatter = opts && 'formatter' in opts ? opts.formatter : null;
    let test = hooks.TestHandle.current;
    formatter == null ? formatter = dart.fn((actual, matcher, reason, matchState, verbose) => {
      let mismatchDescription = new description$.StringDescription.new();
      matcher.describeMismatch(actual, mismatchDescription, matchState, verbose);
      return expect.formatFailure(matcher, actual, dart.toString(mismatchDescription), {reason: reason});
    }, T.ObjectNAndMatcherAndStringN__ToString()) : null;
    if (skip != null && !(typeof skip == 'boolean') && !(typeof skip == 'string')) {
      dart.throw(new core.ArgumentError.value(skip, "skip", "must be a bool or a String"));
    }
    matcher = util.wrapMatcher(matcher);
    if (skip != null && !dart.equals(skip, false)) {
      let message = null;
      if (typeof skip == 'string') {
        message = "Skip expect: " + dart.str(skip);
      } else if (reason != null) {
        message = "Skip expect (" + dart.str(reason) + ").";
      } else {
        let description = new description$.StringDescription.new().addDescriptionOf(matcher);
        message = "Skip expect (" + dart.str(description) + ").";
      }
      test.markSkipped(message);
      return async.Future.sync(dart.fn(() => {
      }, T.VoidToNull()));
    }
    if (T.AsyncMatcher()[_is](matcher)) {
      let result = matcher.matchAsync(actual);
      expect.expect(result, operator_matchers.anyOf(G.JSArrayOfMatcher().of([equals_matcher.equals(null), C[0] || CT.C0, C[1] || CT.C1])), {reason: "matchAsync() may only return a String, a Future, or null."});
      if (typeof result == 'string') {
        expect.fail(expect.formatFailure(matcher, actual, result, {reason: reason}));
      } else if (T.Future()[_is](result)) {
        let outstandingWork = test.markPending();
        return result.then(T.Null(), dart.fn(realResult => {
          if (realResult == null) return;
          expect.fail(expect.formatFailure(T.Matcher()[_as](matcher), actual, T.String()[_as](realResult), {reason: reason}));
        }, T.dynamicToNull())).whenComplete(dart.bind(outstandingWork, 'complete'));
      }
      return async.Future.sync(dart.fn(() => {
      }, T.VoidToNull()));
    }
    let matchState = new _js_helper.LinkedMap.new();
    try {
      if (T.Matcher()[_as](matcher).matches(actual, matchState)) {
        return async.Future.sync(dart.fn(() => {
        }, T.VoidToNull()));
      }
    } catch (t$36$35e) {
      let e = dart.getThrown(t$36$35e);
      let trace = dart.stackTrace(t$36$35e);
      if (T.Object()[_is](e)) {
        reason == null ? reason = dart.str(e) + " at " + dart.str(trace) : null;
      } else
        throw t$36$35e;
    }
    expect.fail(formatter(actual, T.Matcher()[_as](matcher), reason, matchState, verbose));
  };
  expect.fail = function fail(message) {
    return dart.throw(new test_failure.TestFailure.new(message));
  };
  expect.formatFailure = function formatFailure(expected, actual, which, opts) {
    let reason = opts && 'reason' in opts ? opts.reason : null;
    let buffer = new core.StringBuffer.new();
    buffer.writeln(pretty_print.indent(pretty_print.prettyPrint(expected), {first: "Expected: "}));
    buffer.writeln(pretty_print.indent(pretty_print.prettyPrint(actual), {first: "  Actual: "}));
    if (which[$isNotEmpty]) buffer.writeln(pretty_print.indent(which, {first: "   Which: "}));
    if (reason != null) buffer.writeln(reason);
    return dart.toString(buffer);
  };
  dart.moduleConstCaches.set("packages/matcher/src/expect/prints_matcher.dart", C);
  dart_rti._Universe.addRules(dart.typeUniverse, JSON.parse('{"core|String":{"Comparable.T":"core|String","core|Comparable":["core|String"],"core|Pattern":[]},"core|Comparable":{"Comparable.T":"1"},"async|Future":{"Future.T":"1"},"matcher__src__type_matcher|TypeMatcher":{"TypeMatcher.T":"1","matcher__src__interfaces|Matcher":[]},"core|Map":{"Map.K":"1","Map.V":"2"},"matcher__src__expect__async_matcher|AsyncMatcher":{"matcher__src__interfaces|Matcher":[]},"matcher__src__expect__prints_matcher|_Prints":{"matcher__src__expect__async_matcher|AsyncMatcher":[],"matcher__src__interfaces|Matcher":[]},"matcher__src__expect__throws_matcher|Throws":{"matcher__src__expect__async_matcher|AsyncMatcher":[],"matcher__src__interfaces|Matcher":[]},"matcher__src__expect__future_matchers|_Completes":{"matcher__src__expect__async_matcher|AsyncMatcher":[],"matcher__src__interfaces|Matcher":[]},"matcher__src__expect__future_matchers|_DoesNotComplete":{"matcher__src__interfaces|Matcher":[]}}'));
  dart.trackLibraries("packages/matcher/src/expect/prints_matcher.dart", {
    "package:matcher/src/expect/prints_matcher.dart": prints_matcher,
    "package:matcher/src/expect/throws_matcher.dart": throws_matcher,
    "package:matcher/src/expect/future_matchers.dart": future_matchers,
    "package:matcher/src/expect/async_matcher.dart": async_matcher,
    "package:matcher/src/expect/expect.dart": expect
  }, {
  }, '{"version":3,"sourceRoot":"","sources":["async_matcher.dart","prints_matcher.dart","throws_matcher.dart","future_matchers.dart","expect.dart"],"names":[],"mappings":"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","file":"../../../../../../../../../packages/matcher/src/expect/prints_matcher.dart.lib.js"}');
  // Exports:
  return {
    src__expect__prints_matcher: prints_matcher,
    src__expect__throws_matcher: throws_matcher,
    src__expect__future_matchers: future_matchers,
    src__expect__async_matcher: async_matcher,
    src__expect__expect: expect
  };
}));

//# sourceMappingURL=prints_matcher.dart.lib.js.map
